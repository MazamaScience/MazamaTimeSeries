<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Core Functionality for Environmental Time Series • MazamaTimeSeries</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="bootstrap-toc.css">
<script src="bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="Core Functionality for Environmental Time Series">
<meta property="og:description" content="Utility functions for working with environmental time series data from known 
    locations. The compact data model is structured as a list with two dataframes. A 
    meta dataframe contains spatial and measuring device metadata associated with 
    deployments at known locations. A data dataframe contains a datetime column 
    followed by columns of measurements associated with each &quot;device-deployment&quot;.
    Ephemerides calculations are based on code originally found in NOAA's
    &quot;Solar Calculator&quot; &lt;https://gml.noaa.gov/grad/solcalc/&gt;.">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">MazamaTimeSeries</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.2.6</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="articles/MazamaTimeSeries.html">Get started</a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="articles/Developer_Style_Guide.html">Developer Style Guide</a>
    </li>
  </ul>
</li>
<li>
  <a href="news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/MazamaScience/MazamaTimeSeries/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="contents col-md-9">


<div id="mazamatimeseries" class="section level1">
<div class="page-header"><h1 class="hasAnchor">
<a href="#mazamatimeseries" class="anchor"></a>MazamaTimeSeries</h1></div>
<pre><code>Utility functions for working with environmental time series data from known 
locations. The compact data model is structured as a list with two dataframes. A 
'meta' dataframe contains spatial and measuring device metadata associated with 
deployments at known locations. A 'data' dataframe contains a 'datetime' column 
followed by columns of measurements associated with each "device-deployment".</code></pre>
<div id="background" class="section level2">
<h2 class="hasAnchor">
<a href="#background" class="anchor"></a>Background</h2>
<p>This package supports data management activities associated with
environmental time series collected at fixed locations in space. The
motivating fields include both air and water quality monitoring where
fixed sensors report at regular time intervals.</p>
</div>
<div id="data-model" class="section level2">
<h2 class="hasAnchor">
<a href="#data-model" class="anchor"></a>Data Model</h2>
<p>The most compact format for time series data collected at fixed
locations is a list including two tables.
<strong>MazamaTimeSeries</strong> stores time series measurements in a
<code>data</code> table where each row is a synoptic record containing
all measurements associated with a particular UTC time stamp and each
column contains data measured by a single sensor (aka “device”). Any
time invariant metadata associated with a sensor at a known location
(aka a “device-deployment”) is stored in a separate <code>meta</code>
table. A unique <code>deviceDeploymentID</code> connects the two tables.
In the language of relational databases, this “normalizes” the database
and can greatly reduce the disk space and memory needed to store and
work with the data.</p>
<div id="single-time-series" class="section level3">
<h3 class="hasAnchor">
<a href="#single-time-series" class="anchor"></a>Single Time Series</h3>
<p>Time series data from a single environmental sensor typically
consists of multiple parameters measured at successive times. This data
is stored in an R list containing two dataframes. The package refers to
this structure as an <code>sts</code> object for
<strong>S</strong>ingle<strong>T</strong>ime<strong>S</strong>eries:</p>
<p><code>sts$meta</code> – 1 row = unique device-deployment; cols =
device/location metadata</p>
<p><code>sts$data</code> – rows = UTC times; cols = measured parameters
(plus an additional <code>datetime</code> column)</p>
<p><code>sts</code> objects can support the following types of time
series data:</p>
<ul>
<li>stationary device-deployments only (no “mobile” sensors)</li>
<li>single sensor only</li>
<li>regular or irregular time axes</li>
<li>multiple parameters</li>
</ul>
<p>Raw, “engineering data” containing uncalibrated measurements,
instrument voltages and QC flags may be stored in this format. This
format is also appropriate for processed and QC’ed data whenever
multiple parameters are measured by a single device.</p>
<p><em><strong>Note:</strong></em> The <code>sts</code> object time axis
specified in <code>data$datetime</code> reflects device measurement
times and is not required to have uniform spacing. (It <em>may</em> be
regular but it need not be.)</p>
</div>
<div id="multiple-time-series" class="section level3">
<h3 class="hasAnchor">
<a href="#multiple-time-series" class="anchor"></a>Multiple Time Series</h3>
<p>Working with timeseries data from multiple sensors at once is often
challenging because of the amount of memory required to store all the
data from each sensor. However, a common situation is to have time
series that share a common time axis – <em>e.g.</em> hourly
measurements. In this case, it is possible to create single-parameter
<code>data</code> dataframes that contain all data for all sensors for a
single parameter of interest. In air quality applications, common
parameters of interest include PM2.5 and Ozone.</p>
<p>Multi-sensor, single-parameter time series data is stored in an R
list with two dataframes. The package refers to this structure as an
<code>mts</code> object for
<strong>M</strong>ultiple<strong>T</strong>ime<strong>S</strong>eries:</p>
<p><code>mts$meta</code> – N rows = unique device-deployments; cols =
device/location metadata</p>
<p><code>mts$data</code> – rows = UTC times; N cols = device-deployments
(plus an additional <code>datetime</code> column)</p>
<p>A key feature of <code>mts</code> objects is the use of the
<code>deviceDeploymentID</code> as a “foreign key” that allows sensor
<code>data</code> columns to be mapped onto the associated spatial and
sensor metadata in a <code>meta</code> row. The following will always be
true:</p>
<pre><code><a href="https://rdrr.io/r/base/identical.html">identical(names(mts$data), c('datetime', mts$meta$deviceDeploymentID))</a></code></pre>
<p><code>mts</code> objects can support the following types of time
series data:</p>
<ul>
<li>stationary device-deployments only (no “mobile” sensors)</li>
<li>multiple sensors</li>
<li>regular (shared) hourly time axes only</li>
<li>single parameter only</li>
</ul>
<p>Each column of <code>mts$data</code> represents a timeseries
associated with a particular device-deployment while each row represents
a <em>synoptic</em> snap shot of all measurements made at a particular
time.</p>
<p>In this manner, software can create both timeseries plots and maps
from a single <code>mts</code> object in memory.</p>
<p><em><strong>Note:</strong></em> The <code>mts</code> object time axis
specified in <code>data$datetime</code> is guaranteed to be a regular
hourly axis with no gaps.</p>
<hr>
<p>This R package was created with funding from the USFS <a href="https://www.airfire.org">AirFire Research Team</a>.</p>
</div>
</div>
</div>

  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <div class="links">
<h2>Links</h2>
<ul class="list-unstyled">
<li>Download from CRAN at <br><a href="https://cloud.r-project.org/package=MazamaTimeSeries">https://​cloud.r-project.org/​package=MazamaTimeSeries</a>
</li>
<li>Browse source code at <br><a href="https://github.com/MazamaScience/MazamaTimeSeries/">https://​github.com/​MazamaScience/​MazamaTimeSeries/​</a>
</li>
<li>Report a bug at <br><a href="https://github.com/MazamaScience/MazamaTimeSeries/issues">https://​github.com/​MazamaScience/​MazamaTimeSeries/​issues</a>
</li>
</ul>
</div>
<div class="license">
<h2>License</h2>
<ul class="list-unstyled">
<li><a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a></li>
</ul>
</div>
<div class="developers">
<h2>Developers</h2>
<ul class="list-unstyled">
<li>Jonathan Callahan <br><small class="roles"> Author, maintainer </small>  </li>
<li><a href="authors.html">All authors...</a></li>
</ul>
</div>

  <div class="dev-status">
<h2>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://cran.r-project.org/package=MazamaTimeSeries"><img src="http://www.r-pkg.org/badges/version/MazamaTimeSeries" alt="CRAN_Status_Badge"></a></li>
<li><a href="https://cran.r-project.org/package=MazamaTimeSeries"><img src="http://cranlogs.r-pkg.org/badges/MazamaTimeSeries" alt="Downloads"></a></li>
<li><a href="https://travis-ci.org/MazamaScience/MazamaTimeSeries"><img src="https://travis-ci.org/MazamaScience/MazamaTimeSeries.svg?branch=master" alt="Build Status"></a></li>
<li><a href="https://zenodo.org/badge/latestdoi/327964561"><img src="https://zenodo.org/badge/327964561.svg" alt="DOI"></a></li>
</ul>
</div>
</div>
</div>


      <footer><div class="copyright">
  <p>Developed by Jonathan Callahan.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
